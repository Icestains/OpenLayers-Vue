(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b953bcaa"],{"0c3c":function(e,t,o){"use strict";var n=o("61f9"),i=o.n(n);i.a},"61f9":function(e,t,o){},"959f":function(e,t,o){"use strict";o.r(t);var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"root"},[o("div",{staticClass:"map",attrs:{id:"map"}}),o("label",[e._v("Measurement type  ")]),o("select",{directives:[{name:"model",rawName:"v-model",value:e.selected,expression:"selected"}],on:{change:[function(t){var o=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.selected=t.target.multiple?o:o[0]},e.selectVal]}},e._l(e.selects,function(t){return o("option",{key:t.value},[e._v(e._s(t.value))])}),0),o("p",[e._v("length:"+e._s(e.lineLength))])])},i=[],a=(o("8e6e"),o("ac6a"),o("456d"),o("bd86")),l=o("2f62"),r=(o("5bc0"),o("35a7")),s=o("0710"),c=o("790a"),u=o("5bc3"),p=o("7a09"),h=o("ac29"),m=o("3e6b"),d=o("5831"),f=o("6c77"),g=o("83a6"),w=o("8682"),v=o("ce2c"),T=o("f403"),b=o("4cdf");function E(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),o.push.apply(o,n)}return o}function y(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?E(o,!0).forEach(function(t){Object(a["a"])(e,t,o[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):E(o).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))})}return e}var O={name:"measure",data:function(){return{lineLength:"",selected:"length",selects:[{value:"length"},{value:"area"}],source:null,measureTooltipElement:null,measureTooltip:null,continuePolygonMsg:"Click to continue drawing the polygon",continueLineMsg:"Click to continue drawing the line",draw:null,sketch:null,helpTooltip:null,helpTooltipElement:null}},computed:y({},Object(l["c"])({map:"map"})),mounted:function(){},methods:{init:function(){var e=this,t=0;this.source=new d["a"];var o=new m["a"]({source:this.source,style:new f["c"]({fill:new g["a"]({color:"rgba(255, 255, 255, 0.2)"}),stroke:new w["a"]({color:"#ffcc33",width:2}),image:new v["a"]({radius:7,fill:new g["a"]({color:"#ffcc33"})})})});this.map.addLayer(o),this.map.on("pointermove",this.pointerMoveHandler),this.map.on("singleclick",function(o){e.measureTooltip.setPosition(o.coordinate),0===t&&(e.measureTooltipElement.innerHTML="起点",window.console.log(t));var n=new T["a"](o.coordinate);e.source.addFeature(new b["a"](n)),e.measureTooltipElement.className="tooltip tooltip-static",e.createMeasureTooltip(),t++}),this.map.on("dblclick",function(t){var o=new T["a"](t.coordinate);e.source.addFeature(new b["a"](o))}),this.map.getViewport().addEventListener("mouseout",function(){e.helpTooltipElement.classList.add("hidden"),window.console.log(e.helpTooltipElement.classList)})},formatLength:function(e){var t,o=Object(c["c"])(e);return o*=1e5,t=o>1e3?Math.round(o/1e3*100)/100+" km":Math.round(100*o)/100+" m",t},formatArea:function(e){var t,o=Object(c["a"])(e);return o*=100,t=o>1?Math.round(100*o)/100+" km<sup>2</sup>":Math.round(1e6*o*100)/100+" m<sup>2</sup>",t},addInteraction:function(){var e,t=this,o="area"===this.selected?"Polygon":"LineString";this.draw=new h["a"]({source:this.source,type:o,style:new f["c"]({fill:new g["a"]({color:"rgba(255, 255, 255, 0.2)"}),stroke:new w["a"]({color:"rgba(0, 0, 0, 0.5)",lineDash:[10,10],width:2}),image:new v["a"]({radius:5,stroke:new w["a"]({color:"rgba(0, 0, 0, 0.7)"}),fill:new g["a"]({color:"rgba(255, 255, 255, 0.2)"})})})}),this.map.addInteraction(this.draw),this.createMeasureTooltip(),this.createHelpTooltip(),this.draw.on("drawstart",function(o){t.sketch=o.feature;var n=o.coordinate;e=t.sketch.getGeometry().on("change",function(e){var o,i=e.target;i instanceof u["a"]?(o=t.formatArea(i),n=i.getInteriorPoint().getCoordinates()):i instanceof p["a"]&&(o=t.formatLength(i),n=i.getLastCoordinate()),t.lineLength=o,t.measureTooltipElement.innerHTML=o,t.measureTooltip.setPosition(n)})},this),this.draw.on("drawend",function(){t.measureTooltipElement.className="tooltip tooltip-static",t.measureTooltip.setOffset([-40,-50]),t.sketch=null,t.measureTooltipElement=null,t.createMeasureTooltip(),Object(r["b"])(e)},this)},createHelpTooltip:function(){this.helpTooltipElement&&this.helpTooltipElement.parentNode.removeChild(this.helpTooltipElement),this.helpTooltipElement=document.createElement("div"),this.helpTooltipElement.className="tooltip",this.helpTooltip=new s["a"]({element:this.helpTooltipElement,offset:[20,0],positioning:"center-left"}),this.map.addOverlay(this.helpTooltip)},createMeasureTooltip:function(){this.measureTooltipElement&&this.measureTooltipElement.parentNode.removeChild(this.measureTooltipElement),this.measureTooltipElement=document.createElement("div"),this.measureTooltipElement.className="tooltip tooltip-measure",this.measureTooltip=new s["a"]({element:this.measureTooltipElement,offset:[-40,-50],positioning:"bottom-center",autoPan:!0}),this.map.addOverlay(this.measureTooltip)},pointerMoveHandler:function(e){if(!e.dragging){var t="Click to start drawing";if(this.sketch){var o=this.sketch.getGeometry();o instanceof u["a"]?t=this.continuePolygonMsg:o instanceof p["a"]&&(t=this.continueLineMsg)}this.helpTooltipElement.innerHTML=t,this.helpTooltip.setPosition(e.coordinate),this.helpTooltipElement.classList.remove("hidden")}},selectVal:function(){this.map.removeInteraction(this.draw),this.addInteraction(),window.console.log(this.selected)}}},k=O,M=(o("0c3c"),o("2877")),L=Object(M["a"])(k,n,i,!1,null,"59b33abf",null);t["default"]=L.exports}}]);